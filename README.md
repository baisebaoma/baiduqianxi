# 百度迁徙平台数据获取

[百度迁徙平台](http://qianxi.baidu.com/#/)（百度慧眼）几乎是日前最具有参考价值的中国人口迁徙数据，许多论文以此为数据基础。但在其官网上既没有展示所有的数据，也没有提他们有公开的接口，甚至没有留下任何文档，只有一句“获取详情数据请点击[联系我们](https://huiyan.baidu.com/contact?article=qianxi)”。

经过研究，我们发现实际上除了没有给出公开的文档以外，百度迁徙平台不仅留了免费的接口，还能获取所有的数据。似乎并没有要关闭这个接口的意思。~~感觉百度的意思就是：你有能力爬，我们愿意把数据给你；你没能力爬，那就花钱找我们要。~~

很显然我们有这个能力。2024 年初 GitHub 上没有仍然在更新的、满足相同需求的代码，我们尝试抛砖引玉补齐这些，并整理好信息为后来人提供帮助。

## 接口

以下面的接口为例。

http://huiyan.baidu.com/migration/cityrank.jsonp?dt=province&id=330000&type=move_in&callback=jsonp_1581412681419_9173670

## 参数

### dt

dt是级别。可选的值有：country，province，city

### id

六位数，代表区域（可以是省，也可以是市），如：360100。如果是国家，官方请求的时候id一般是0，但是其实不给也可以。

### type

move_in, move_out 分别代表迁入迁出数据。

### date

长度为8、格式为年月日的日期，如：20240130

### callback

callback是一个时间戳，他调取的时候格式为：`jsonp_X_Y`，其中X经实验为13位的毫秒级时间戳，Y是7位数字，未发现明显规律（估计也是时间，但是精度更加高）。

爬取的时候，甚至不需要填写这个。它只是代表“我给你返回的数据确实是你这次申请的数据”。

## 代码

你可以以我的代码为范例运行试试看。你只需要修改所有标记了“请修改这里”的地方即可。所有数据会保存`.\data\`下面。